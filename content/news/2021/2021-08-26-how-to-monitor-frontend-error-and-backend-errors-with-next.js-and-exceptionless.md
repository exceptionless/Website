---
title: How To Monitor Frontend Error and Backend Errors With Next.js and Exceptionless
date: 2021-08-26
draft: true
---

One of Next.js's biggest selling points is that it lumps your frontend and backend code together. Run and compile it at the same time. Develop both ends at the same time. It streamlines things considerably. This is equally as true when talking about error handling. Because the code-base is unified, the error-handling is relatively unified as well. 

Today, we'll take a look at how to use [Exceptionless](https://exceptionless.com), an open-source event monitoring service, to handle errors in our Next.js frontend and backend code. To get started, you'll need the following: 

* Free account on [Exceptionless](https://exceptionless.com)
* Vercel CLI installed
* Node.js
* Text editor

Let's jump into it!

## Setting Up Your Next.js Project 

The first thing we need to do is create our project. Fire up your command line and create your new project by running the following: 

```
npm init next-app next-js-exceptionless && cd next-js-exceptionless
```

While we're here at the command line, let's install the newly updated JavaScript client for Exceptionless. 

```
npm install @exceptionless/node @exceptionless/react
```

Why are we installing the Node and React versions of Exceptionless? Well, because Next.js is a fullstack Node and React framework. We want to get the full feature set of Exceptionless in both environments. 

[I've written about how to use Exceptionless and React Error Boundaries before](./2021-08-16-how-to-use-error-boundaries-in-react.md), and we're going to do that here. Remember, Next.js is server-side rendered React, so all React principles apply. We'll set up our Error Boundary, and then we will also handle errors that happen outside of components. Finally, we will set up our server-side error handling. 

## Setting Up The Frontend

If you take a look at your project structure, you'll see a folder called `pages`. Inside the `pages` folder, you'll have an `index.js` file as well as an `api` folder. All our backend code will happen from the `api` folder, but for now we're going to focus on that `index.js` file. It should look pretty familiar. It's a simple React component that looks like this out of the box: 

```js
import Head from 'next/head'
import Image from 'next/image'
import styles from '../styles/Home.module.css'

export default function Home() {
  return (
    <div className={styles.container}>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className={styles.main}>
        <h1 className={styles.title}>
          Welcome to <a href="https://nextjs.org">Next.js!</a>
        </h1>

        <p className={styles.description}>
          Get started by editing{' '}
          <code className={styles.code}>pages/index.js</code>
        </p>

        <div className={styles.grid}>
          <a href="https://nextjs.org/docs" className={styles.card}>
            <h2>Documentation &rarr;</h2>
            <p>Find in-depth information about Next.js features and API.</p>
          </a>

          <a href="https://nextjs.org/learn" className={styles.card}>
            <h2>Learn &rarr;</h2>
            <p>Learn about Next.js in an interactive course with quizzes!</p>
          </a>

          <a
            href="https://github.com/vercel/next.js/tree/master/examples"
            className={styles.card}
          >
            <h2>Examples &rarr;</h2>
            <p>Discover and deploy boilerplate example Next.js projects.</p>
          </a>

          <a
            href="https://vercel.com/new?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app"
            className={styles.card}
          >
            <h2>Deploy &rarr;</h2>
            <p>
              Instantly deploy your Next.js site to a public URL with Vercel.
            </p>
          </a>
        </div>
      </main>

      <footer className={styles.footer}>
        <a
          href="https://vercel.com?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app"
          target="_blank"
          rel="noopener noreferrer"
        >
          Powered by{' '}
          <span className={styles.logo}>
            <Image src="/vercel.svg" alt="Vercel Logo" width={72} height={16} />
          </span>
        </a>
      </footer>
    </div>
  )
}
```

Let's make this as simple as possible (you can style and edit your project to your heart's content but I want to focus on the event handling). I'm going to clear out everything in the return statement and just replace it with: 

```js
<div>
  <h1>Exceptionless And Next.js</h1>
</div>
```

Now, let's create our Error Boundary component. In the root of your `pages` folder, create a new file called `ErrorBoundary.js`. Inside that file, we just need to create the basic React Error Boundary skeleton [as documented here](https://reactjs.org/docs/error-boundaries.html). 

```js
import React from "react";

class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error) {
    return { hasError: true };
  }

  render() {
    if (this.state.hasError) {
      return (
        <div>
          {this.props.renderFallback()}
        </div>
      );
    }

    return this.props.children;
  }
}

export default ErrorBoundary;
```

You have the option to use this at the top level or within each individual component. I'll show you how to use it for each component, but since we only have one component (our index.js file) it will hopefully also give you a nice example of how you might use it at the top level. 

