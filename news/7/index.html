<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">

    <title>Archive - Exceptionless</title>

    <meta name="description" content="Real-time exception reporting for ASP.NET, Web API, WebForms, WPF, Console, and MVC applications. Includes event organization, notifications, and more.">
    <meta name="robots" content="index,follow">
    <meta name="author" content="[object Object]">

    <link rel="canonical" href="NaN">

    <!-- opengraph -->
    <meta property="og:title" content="Archive - Exceptionless">
    <meta property="og:type" content="article">
    <meta property="og:url" content="NaN">
    <meta property="og:description" content="Real-time exception reporting for ASP.NET, Web API, WebForms, WPF, Console, and MVC applications. Includes event organization, notifications, and more.">
    <meta property="og:image" content="undefined/undefined/undefined">
    <!-- end opengraph -->

    <!-- twitter -->
    <meta name="twitter:card" content="summary"><meta name="twitter:site" content="@Exceptionless">
    <meta name="twitter:url" content="NaN">
    <meta name="twitter:title" content="Archive - Exceptionless">
    <meta name="twitter:description" content="Real-time exception reporting for ASP.NET, Web API, WebForms, WPF, Console, and MVC applications. Includes event organization, notifications, and more.">
    <meta name="twitter:image" content="undefined/undefined/undefined">
    <!-- end twitter -->

    <!-- google tag manager -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-433340-8"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-433340-8');
    </script>
    <!-- end google tag manager -->

    <link rel="alternate" href="/website/feed.xml" type="application/atom+xml" title="Exceptionless">
    <link rel="alternate" href="/website/feed.json" type="application/json" title="Exceptionless">
    <link rel="shortcut icon" href="/website/favicon.ico">

    <link rel="stylesheet" href="/website/assets/cyclone-slider-pro/templates/standard/style.css">
    <link rel="stylesheet" href="/website/assets/css/theme.css">
    <link rel="stylesheet" href="/website/assets/css/responsive.css">

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,300,400,600" rel="stylesheet">

    <link href="https://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <link href="/website/assets/css/prism.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>

    <link rel="stylesheet" href="/website/assets/css/custom.css">
  </head>
  <body class="home page custom-background top-navbar">
    <header id="banner" class="topnavbar navbar navbar-fixed-top" role="banner">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="brand" href="/website/">
                    <img id="site-logo" src="/website/assets/img/exceptionless-logo1.png" alt="Exceptionless - .NET Exception Reporting">
                </a>
                <nav id="nav-main" class="nav-main nav-collapse collapse" role="navigation">
                    <ul id="menu-primary-navigation" class="nav pull-right"><li class="menu-tour"><a href="/website/tour/">Tour</a></li>
                        <li class="menu-why"><a href="/website/why/">Why?</a></li>
                        <li class="menu-pricing"><a href="/website/pricing/">Pricing</a></li>
                        <li class="menu-news"><a href="/website/news/">News</a></li>
                        <li class="menu-help"><a href="/website/docs/">Docs</a></li>
                        <li class="menu-log-in"><a href="https://be.exceptionless.io">Log In</a></li>
                        <li class="menu-sign-up"><a href="https://be.exceptionless.io/signup?domain=www.codesmithtools.com&amp;type=organic">Sign Up</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div id="megaDrop" class="container-fluid top-megamenu"><div class="container"><div class="row"></div></div></div>
    </header>

    
      
<div class="page-header margin-top">
  <h1>Archive</h1>
</div>

<div id="wrap" class="container" role="document">
  <div id="content" class="row-fluid">

    <h1>Archive</h1>



  
<article class="post type-post status-publish format-standard">
    <h2><a href="/website/news/2016/2016-03-08-custom-event-stacking-in-exceptionless/">Custom Event Stacking in Exceptionless</a></h2>
    <p><img src="/website/assets/img/news/custom-event-stacking-graphicl.png" alt="custom event stacking with exceptionless">Sometimes you just need things to be your way.</p>
<p>We get it... your morning coffee, folded towels, and how events stack (group) in your event reporting application should be controllable and customizable.</p>
<p>Well, thanks to a great suggestion by <a href="https://github.com/adamzolotarev" target="_blank">@adamzolotarev</a>, now they are! Well, the events, at least.<!--more--></p>
<h2>Why Custom Event Stacking?</h2>
<p>We do our best to group your events into relevant and smartly-named stacks, but there are cases where you may want to specifically name a stack and attribute certain events to&nbsp;it for organization, reporting, troubleshooting,&nbsp;or other reasons.</p>
<p>To facilitate this need, we created <code>SetManualStackingKey</code>, which both .NET and JavaScript client users can set.</p>
<h2>How Do I Create Custom Event Stacks?</h2>
<p>Adding your own custom stacking to events in Exceptionless is super easy. Below are examples for both .NET and JavaScript.</p>
<p>In these examples, we are using <code>setManualStackingKey</code> and naming the custom stack "MyCustomStackingKey".</p>
<p>So, any events you use the below for will be a part of the custom stack, and all other events, exceptiones, logs, feature usages, etc will still be stacked automatically, like normal, by the app.</p>
<h3>.NET Custom Event Stack Example</h3>
<pre><code class="language-cs hljs language-csharp"><span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ApplicationException(<span class="hljs-string">"Unable to create order from quote."</span>);
} <span class="hljs-keyword">catch</span> (Exception ex) {
    ex.ToExceptionless().SetManualStackingKey(<span class="hljs-string">"MyCustomStackingKey"</span>).Submit();
}
</code></pre>
<p>Alternatively, you can set the stacking directly on an event (e.g., inside a plugin).</p>
<pre><code class="language-cs hljs language-csharp"><span class="hljs-keyword">event</span>.SetManualStackingKey(<span class="hljs-string">"MyCustomStackingKey"</span>);
</code></pre>
<h3>JavaScript Custom Event Stack Example</h3>
<pre><code class="language-js hljs language-javascript"><span class="hljs-keyword">var</span> client = exceptionless.<span class="hljs-property">ExceptionlessClient</span>.<span class="hljs-property">default</span>;
<span class="hljs-comment">// Node.Js</span>
<span class="hljs-comment">// var client = require('exceptionless').ExceptionlessClient.default;</span>

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Unable to create order from quote.'</span>);
} <span class="hljs-keyword">catch</span> (error) {
  client.<span class="hljs-title function_">createException</span>(error).<span class="hljs-title function_">setManualStackingKey</span>(<span class="hljs-string">'MyCustomStackingKey'</span>).<span class="hljs-title function_">submit</span>();
}
</code></pre>
<h2>How Do We Stack Up?</h2>
<p>We're always interested in what you think of Exceptionless' features and functionality, so let us know if you find custom stacking useful, need help implementing it, or just want to chat over on <a href="https://github.com/exceptionless" target="_blank">GitHub</a>.</p>
<p>Thanks for reading!</p>
</article>
    
  

  
<article class="post type-post status-publish format-standard">
    <h2><a href="/website/news/2016/2016-02-26-new-releases-exceptionless-3-2-1-net-client-3-3-5-and-ui-2-3-1/">New Releases: Exceptionless 3.2.1, .NET Client 3.3.6, JavaScript Client 1.3.2, UI 2.3.1</a></h2>
    <p style="text-align: center;">
  ![Exceptionless error logging](/assets/img/news/blog-header-image-3.2.1.jpg)
</p>
<p>Since the <a href="/website/new-releases-for-all-the-codes-exceptionless-3-2/">last major release</a> cycle, we've made several minor releases, including Exceptionless 3.2.1, Exceptionless.NET 3.3.5, and Exceptionless.UI 2.3.1.</p>
<p>Lets take a look at some of the highlights, and you can check out the full release notes on each at the provided links, below.<!--more--></p>
<h2>Exceptionless 3.2.1</h2>
<p>We fixed a few minor bugs made a few improvements to the main platform. Check them out!</p>
<ul>
<li>Free accounts can now look up events by reference ID (bug).</li>
<li>Improvements to posting events via GET.</li>
<li>Items can now be added and removed from project data (bug).</li>
<li>Users can log directly in to an existing account if they attempt to sign up with the same credentials now, rather than getting an error.</li>
<li><a href="https://github.com/VikzSharma" target="_blank">@VikzSharma</a> fixed the "too many bad attempts" lockout feature. Thanks!</li>
<li>There is also a once-an-hour limit on user signups and email address changes thanks to @VikzSharma.</li>
</ul>
<p><strong>Upgrading:</strong> Only self-hosters need to worry about upgrading - see details on the <a href="https://github.com/exceptionless/Exceptionless/releases/tag/v3.2.1" target="_blank">full release notes.</a></p>
<h2>Exceptionless.NET 3.3.3 - 3.3.6</h2>
<p>We've pushed out several minor releases of the .NET client in the last few weeks. I'll cover the major stuff here, but you can view the <a href="https://github.com/exceptionless/Exceptionless.Net/releases" target="_blank">full release notes and get the latest source on GitHub</a>.</p>
<h3>3.3.6</h3>
<ul>
<li>An issue causing query string params and cookies to be renamed when dictionary key names were being changed has been fixed.</li>
<li><code>client.Register()</code> now respects your session setting.</li>
<li>Manual stacking now uses a model instead of a string, which lets us send a stack title and key value pairs telling the event how to be stacked. More info on the release page.</li>
</ul>
<p><strong>If you are using manual stacking</strong>, this is a required update. <a href="https://github.com/exceptionless/Exceptionless.Net/releases/tag/v3.3.6" target="_blank">See the release page for the latest source.</a></p>
<h3>3.3.5</h3>
<ul>
<li>New extension methods have been added for events, making it easier to set valid geo coordinates, tags, and more.</li>
<li>A few new variables and parameters have been added for session heartbeats and id setting. See release notes for details.</li>
<li><a href="https://github.com/InlineAsm" target="_blank">@InlineASM</a> fixed an issue for geolocations that have different separators - thanks!</li>
</ul>
<h3>3.3.4</h3>
<ul>
<li><a href="https://github.com/ahmettaha" target="_blank">@ahmettaha</a> added SubmitLog and CreateLog overloads without source parameters. Thanks!</li>
<li><code>ExceptionlessClient.Default.Configuration.UseDebugLogger()</code> only worked in debug mode with client source, so we replaced it with <code>ExceptionlessClient.Default.Configuration.UseInMemoryLogger()</code></li>
<li>The serializer wasn't always being passed through so it could get known event data helper methods, which was causing some silent failures - this has been fixed.</li>
</ul>
<h3>3.3.3</h3>
<ul>
<li><a href="https://github.com/adamzolotarev" target="_blank">@adamzolotarev</a> added the ability to take complete control over how an event is stacked (be careful) by adding the ability to do manual stacking by calling <code>EventBuilder.SetManualStackingKey("MyStackingKey")</code></li>
<li>You can now ignore events by user agent bot filter when you call <code>(ExceptionlessClient.Default.Configuration.AddUserAgentBotPatterns("*bot*"))</code> on the client side or edit project settings server side.</li>
<li>The default max size limit of <code>RequestInfo</code> has been increased.</li>
<li>Extra nesting has been reduced by merging <code>exception.Data</code> properties into the <code>Error.Data</code> dictionary.</li>
<li>Bug Fix: <code>AggregatedExceptiones</code> that contain more than one inner exception are no longer discarded.</li>
<li>Bug Fix: Machines with a Non-English locale will not process events when <code>SetGeo</code> is used.</li>
<li>Bug Fix: <code>ArgumentNullException</code> will no longer be thrown if post data or cookies contain a null key.</li>
</ul>
<h2>Exceptionless.JavaScript&nbsp;1.3.2</h2>
<ul>
<li><a href="https://github.com/frankebersoll" target="_blank">@frankebersoll</a> contributed by adding support for offline storage, which can be enabled by calling <code>client.config.useLocalStorage()</code>. Thanks!</li>
<li>User agent bots can be ignored via a filter now with <code>(`client.config.addUserAgentBotPatterns("bot"))</code> on the client side or via project settings on the server side.</li>
<li><a href="https://github.com/frankebersoll" target="_blank">@frankebersoll</a>&nbsp;also added support for manual stacking (be careful! grants complete control). See release notes for instructions.</li>
<li>The implementation of the angular <code>$stateChangeError</code> has also been improved.</li>
</ul>
<p><a href="https://github.com/exceptionless/Exceptionless.JavaScript/releases/tag/v1.3.2" target="_blank">Full release notes</a></p>
<h2>Exceptionless.UI 2.3.1</h2>
<p>There's nothing major to report with the UI, just a few tweaks.</p>
<ul>
<li>The project settings pages has been reworked by adding the ability to specify user namespaces, and user agents that the clients will ignore. @VikzSharma also fixed an issue where the single page app could be clickjacked - thanks again!</li>
</ul>
<p><a href="https://github.com/exceptionless/Exceptionless.UI/releases/tag/v2.3.1" target="_blank">Full release notes&nbsp;and latest release download.</a></p>
<h2>Questions? Let Us Know!</h2>
<p>If you've got any questions about any of the release notes above, please don't hesitate to let us know by commenting below or submitting an issue to the respective GitHub repo, above.</p>
<p>Thanks for checking out our release notes.</p>
</article>
    
  

  
<article class="post type-post status-publish format-standard">
    <h2><a href="/website/news/2016/2016-02-10-add-reverse-geocoding-to-your-app/">Add Reverse Geocoding to Your App</a></h2>
    <p><img src="/website/assets/img/news/reverse-geocoding-header.jpg" alt="Reverse Geocoding"></p>
<p>We recently introduced reverse geocoding into Exceptionless and are now adding features to make full use of it.</p>
<p>What we'd like to do in this blog article is <strong>walk any interested developers through the process of adding it to their own app.</strong></p>
<p>We'll talk about the resources and services we're using to pull it off, why we chose them, and give you code snippets for implementation. It's all open source, so we've also included links to all the relevant code in hopes it will make your life easier!</p>
<p>Lets check it out.</p>
<h2>What is Reverse Geocoding?</h2>
<!--more-->
<p>It’s the process of taking geo coordinates or an IP Address and resolving it to a physical address (E.G., city, county, state/province, country).</p>
<h3>Why You Need It</h3>
<p><img src="/website/assets/img/news/user-event-geo-location.jpg" alt="Reverse Geocoding - User Location"></p>
<p>Wouldn’t it be nice if you could <strong>provide location services to your users automatically</strong>? Maybe help them fill in a shipping form from a zip code or there current location?</p>
<p>With the launch of Exceptionless 2.0 we added a geo property to all events. This allows us to translate valid latitude and longitude coordinates into a physical location. Our goal was to begin capturing the data then and enable different scenarios and uses later. This also allowed us to <strong>show end users where their customers events are being submitted from.</strong></p>
<h3>What does it cost?</h3>
<p>One of our primary goals with Exceptionless is to be <strong>completely open source and easy to use</strong> (both in setting up self hosting and using the product). We had to take this into account when picking any library or service, because we want a painless setup and no additional costs for self hosters, all while adding additional value!</p>
<p><strong>Please note</strong> that if you love the services we use, you should look into using one of their paid plans&nbsp;or at least promoting them with a positive review, shout out, etc (everyone needs to eat at the end of the day, right?).</p>
<p>After researching&nbsp;many different services, we ended up goin</p>
<p>g with <a href="http://dev.maxmind.com/geoip/geoip2/geolite2/" target="_blank">GeoLite2's free, offline, downloadable databases</a>. These databases are <strong>free and updated once a month</strong>, but if you require a more accurate and up-to-date database they offer a paid subscription. We also use their <a href="https://github.com/maxmind/GeoIP2-dotnet" target="_blank">open source library</a> for interacting with the database in memory.</p>
<h2>Automating the GeoIP Database Download</h2>
<p>We use our very own&nbsp;<a href="https://github.com/FoundatioFx/Foundatio#jobs" target="_blank">Foundatio Jobs</a> to download the most up-to-date database. Foundatio Jobs allows us to run the job in process or out of process on a schedule in Azure.</p>
<p>Alternatively, you could use the <a href="https://github.com/exceptionless/Exceptionless/blob/v3.5.1/Libraries/DownloadGeoIPDatabase.ps1" target="_blank">PowerShell script</a> we created for downloading the database. &nbsp;<code>&lt;a href="https://github.com/exceptionless/Exceptionless/blob/master/src/Exceptionless.Core/Jobs/DownloadGeoIPDatabaseJob.cs" target="_blank"&gt;DownloadGeoIPDatabaseJob&lt;/a&gt;</code> downloads the database over http and extracts the file contents to disk using <a href="https://github.com/FoundatioFx/Foundatio#file-storage" target="_blank">Foundatio Storage</a>.</p>
<p>Please feel free to <strong>take a look out our job</strong> for a complete sample including logging and error handling:</p>
<pre><code class="language-cs hljs language-csharp"><span class="hljs-keyword">var</span> client = <span class="hljs-keyword">new</span> HttpClient();
<span class="hljs-keyword">var</span> file = <span class="hljs-keyword">await</span> client.GetAsync(<span class="hljs-string">"http://geolite.maxmind.com/download/geoip/database/GeoLite2-City.mmdb.gz"</span>, context.CancellationToken);
<span class="hljs-keyword">if</span> (!file.IsSuccessStatusCode)
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">"Unable to download GeoIP database."</span>);

<span class="hljs-keyword">using</span> (GZipStream decompressionStream = <span class="hljs-keyword">new</span> GZipStream(<span class="hljs-keyword">await</span> file.Content.ReadAsStreamAsync(), CompressionMode.Decompress))
    <span class="hljs-keyword">await</span> _storage.SaveFileAsync(<span class="hljs-string">"GeoLite2-City.mmdb"</span>, decompressionStream, context.CancellationToken);
</code></pre>
<h2>Looking up a Physical Address from an IP Address</h2>
<h4>Resolving the geo coordinates into a location</h4>
<p>After we automate the database download, the next step involves loading the database in memory using the <a href="https://github.com/maxmind/GeoIP2-dotnet" target="_blank">open source library</a> provided by MaxMind and querying by the IP address. The code below will do very basic IP validation and lookup the records using the API.</p>
<pre><code class="language-cs hljs language-csharp"><span class="hljs-keyword">private</span> DatabaseReader _database;
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;GeoResult&gt; <span class="hljs-title">ResolveIpAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> ip, CancellationToken cancellationToken = <span class="hljs-keyword">new</span> CancellationToken(</span>))</span> {
    <span class="hljs-keyword">if</span> (String.IsNullOrWhiteSpace(ip) || (!ip.Contains(<span class="hljs-string">"."</span>) &amp;&amp; !ip.Contains(<span class="hljs-string">":"</span>)))
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">var</span> database = <span class="hljs-keyword">await</span> GetDatabaseAsync(cancellationToken);
    <span class="hljs-keyword">if</span> (database == <span class="hljs-literal">null</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">var</span> city = database.City(ip);
        <span class="hljs-keyword">if</span> (city?.Location != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GeoResult {
                Latitude = city.Location.Latitude,
                Longitude = city.Location.Longitude,
                Country = city.Country.IsoCode,
                Level1 = city.MostSpecificSubdivision.IsoCode,
                Locality = city.City.Name
            };
        }
    } <span class="hljs-keyword">catch</span> (Exception) {
        <span class="hljs-comment">// The result was not found in the database</span>
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}

<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> Task&lt;DatabaseReader&gt; <span class="hljs-title">GetDatabaseAsync</span>(<span class="hljs-params">CancellationToken cancellationToken</span>)</span> {
    <span class="hljs-keyword">if</span> (_database != <span class="hljs-literal">null</span>)
        <span class="hljs-keyword">return</span> _database;

    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">await</span> _storage.ExistsAsync(<span class="hljs-string">"GeoLite2-City.mmdb"</span>)) {
        Logger.Warn().Message(<span class="hljs-string">"No GeoIP database was found."</span>).Write();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> stream = <span class="hljs-keyword">await</span> _storage.GetFileStreamAsync(<span class="hljs-string">"GeoLite2-City.mmdb"</span>, cancellationToken))
            _database = <span class="hljs-keyword">new</span> DatabaseReader(stream);
    } <span class="hljs-keyword">catch</span> (Exception) {
        <span class="hljs-comment">// Unable to open GeoIP database.</span>
    }

    <span class="hljs-keyword">return</span> _database;
}
</code></pre>
<p>Then, just call the <code>ResolveIPAsync</code> method with an IP address to look up the location details.</p>
<pre><code class="language-cs hljs language-csharp"><span class="hljs-keyword">var</span> location = <span class="hljs-keyword">await</span> ResolveIPAsync(<span class="hljs-string">"YOUR_IP_ADDRESS_HERE"</span>);
</code></pre>
<p>Feel free to take a look at&nbsp;<code>&lt;a href="https://github.com/exceptionless/Exceptionless/blob/master/src/Exceptionless.Insulation/Geo/MaxMindGeoIpService.cs" target="_blank"&gt;MaxMindGeoIPService&lt;/a&gt;</code> for a complete sample that&nbsp;includes logging, error handling, caching of the results, and IP validation for higher lookup throughput. We’ve spent the time writing tests and optimizing it to ensure <strong>its rock solid and works great</strong>. So feel free to grab our IGeoIPService interfaces and models and use them in your app.</p>
<p><strong>It’s worth noting</strong> that in our app, we use the IP address provided in the event. This could come from a server request or the actual machine's IP address. We also fall back to the API&nbsp;consumer's client IP address.</p>
<h3>Looking up a Physical Address from Geo Coordinates</h3>
<p>As stated previously, every event submitted to Exceptionless has a geo property that&nbsp;can be set. If it’s set, we will attempt to look up your location by the geo coordinates using a third party service. We used the open source <a href="https://github.com/chadly/Geocoding.net" target="_blank">Geocoding.net library</a>, which abstracts the major different third party reverse geocode services into an easy to use API (options are always good!).</p>
<p>After we decided on the library, we evaluated a few API/lookup&nbsp;services based on cost and accuracy. We ended up going with the <a href="https://developers.google.com/maps/documentation/geocoding/usage-limits" target="_blank">Google Maps GeoCoding API</a>. They offer&nbsp;2500 free requests&nbsp;per day and are one of the most used location services in the world.</p>
<p>Next, let’s write the code that will look up our location from a latitude and longitude. You can find our complete example here.</p>
<p>Remember to get your free api key from Google before running the code below.</p>
<pre><code class="language-cs hljs language-csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;GeoResult&gt; <span class="hljs-title">ReverseGeocodeAsync</span>(<span class="hljs-params"><span class="hljs-built_in">double</span> latitude, <span class="hljs-built_in">double</span> longitude, CancellationToken cancellationToken = <span class="hljs-keyword">new</span> CancellationToken(</span>))</span> {
    <span class="hljs-keyword">var</span> geocoder = <span class="hljs-keyword">new</span> GoogleGeocoder(<span class="hljs-string">"YOUR_API_KEY"</span>);
    <span class="hljs-keyword">var</span> addresses = <span class="hljs-keyword">await</span> geocoder.ReverseGeocodeAsync(latitude, longitude, cancellationToken);
    <span class="hljs-keyword">var</span> address = addresses.FirstOrDefault();
    <span class="hljs-keyword">if</span> (address == <span class="hljs-literal">null</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GeoResult {
        Country = address[GoogleAddressType.Country]?.ShortName,
        Level1 = address[GoogleAddressType.AdministrativeAreaLevel1]?.ShortName,
        Level2 = address[GoogleAddressType.AdministrativeAreaLevel2]?.ShortName,
        Locality = address[GoogleAddressType.Locality]?.ShortName,
        Latitude = latitude,
        Longitude = longitude
    };
}
</code></pre>
<p>Finally, just call the <code>ReverseGeocodeAsync</code> method with a latitude and longitude to look up the location details.</p>
<pre><code class="language-cs hljs language-csharp"><span class="hljs-keyword">var</span> location = <span class="hljs-keyword">await</span> ResolveGeocodeAsync(<span class="hljs-number">44.5241</span>, <span class="hljs-number">-87.9056</span>);
</code></pre>
<h2>Final Thoughts on Reverse Geocoding</h2>
<p>It took us a bit of work and research initially to get everything working flawlessly for location services. We hope you grab our code off of GitHub to <strong>save yourself all that work</strong>. Also, it’s worth noting that we use <a href="https://github.com/FoundatioFx/Foundatio#caching" target="_blank">Foundatio Caching</a> to cache the results of location lookups. It drastically&nbsp;increased the performance and&nbsp;cut down on our limited number of requests to rate-limited third party services!</p>
<p>We also queue work items to look up the geo location since that&nbsp;can be an expensive operation. So, please take this into consideration anytime you are interacting with a third party service.</p>
<h2>Feedback? Questions?</h2>
<p>Get in touch on <a href="https://github.com/exceptionless" target="_blank">GitHub</a>&nbsp;or leave a comment below to let us know your thoughts or questions. We're always open to suggestions and will do what we can to help you out if you're having issues with implementation!</p>
</article>
    
  

  
<article class="post type-post status-publish format-standard">
    <h2><a href="/website/news/2016/2016-02-04-replacing-diy-exception-logging-with-exceptionless-case-study/">Replacing DIY Exception Logging with Exceptionless - Case Study</a></h2>
    <p><a href="https://referralrock.com" rel="attachment wp-att-14073" target="_blank"><img src="/website/assets/img/news/referral-rock-logo.png" alt="referral-rock-logo"></a>Today we bring you a case study from the&nbsp;founder of <a href="https://referralrock.com" target="_blank">Referral Rock</a>&nbsp;and serial entrepreneur, <strong>Joshua Ho</strong>.</p>
<p>Referral Rock is a referral platform for small businesses that Josh created after he "... <strong>realized small businesses lacked the tools to <a href="https://referralrock.com/blog/referral-programs-101-everything-you-need-to-build-a-referral-marketing-program/" target="_blank">make a customer referral program work</a>.</strong>" The app allows businesses to easily and effectively create, implement, and administer a rock-solid referral program to help grow their business.</p>
<p>Exceptionless recently became a part of Referral Rock's exception reporting and logging toolkit, replacing Joshua's home-grown exception logging solutions, and here are his thoughts!</p>
<!--more-->
<p style="text-align: center;margin-top: 45px;margin-bottom: -40px;">
  <span style="font-size:100px">"</span>
</p>
<hr style="margin: 10px 0;">
I've always done my own exception logging. Very basic stuff, where I would just log exceptions to my local drive. This gave me a nice place to just look at errors in my ASP.NET code. As with most code, it ended up in production deployments. At one point, I even built some web pages to view the logs remotely. Those little exception logging code snippets also made it into about 3-5 other projects as the years went by. I knew there was software out there that could do this, but I more or less had it solved for myself.
**But that changed recently.**<p></p>
<blockquote>
<p>"One <strong>huge benefit</strong> Exceptionless adds to my business is giving me the ability to provide&nbsp;better customer support."</p>
</blockquote>
<h2>Enter Exceptionless</h2>
<p>As I've been growing my own SaaS business for referral software, called <a href="https://referralrock.com/" target="_blank">Referral Rock</a>, I realized there were times my old solution wasn't effectively capturing all the exceptions and I would have to venture into the Event Log to find out what happened. Also, I liked being able to view the production server remotely, but my little web pages got lost somewhere and I wasn't excited about coding them again. Who likes to code the same thing more than once? Not I.</p>
<blockquote>
<p>"I could see details on the requests, browser cookies, user identity... all much more than I could see using my old solution."</p>
</blockquote>
<p>So that led me to look for other solutions to view my exceptions remotely, which is when I found Exceptionless. With the help of support, I got it up and running fairly quickly. The guys at Exceptionless were very responsive and helpful in getting me setup.</p>
<h3>Usage &amp; Evaluation</h3>
<p>Being a startup, I was initially using the free version for about 2 weeks and was <strong>blown away</strong>. The UI was great and I love the AngularJS based responsiveness. Soon I had a great pulse on my production server. I could see details on the requests, browser cookies, user identity... all much more than I could see using my old solution. Once I had it set up, I started to see the benefits using other types of events in Exceptionless, such as&nbsp;logging. I started adding some logs when I was debugging an issue with a customer, and it worked great.</p>
<blockquote>
<p>"With the help of support, I got it up and running fairly quickly. The guys at Exceptionless were very responsive and helpful in getting me setup."</p>
</blockquote>
<p>One <strong>huge benefit</strong> Exceptionless adds to my business is giving me the ability to provide&nbsp;better customer support. Not only do I know when errors are happening, but also who is seeing them. This allows me to have an opportunity to reach out to that specific customer, once the issue is fixed, and say something like "I saw you had and error when you did XYZ, I wanted to let you know it is fixed now so you can try it again". Taking opportunities to provide that level of service has helped my business.</p>
<p>We are now running a paid version of Exceptionless with multiple projects and I look forward to adding more logs and playing with other features to give me even greater visibility into my web app. Thanks guys!</p>
<p><span style="font-size:20px;"><i>- Joshua Ho // Founder, <a href="https://referralrock.com" target="_blank">Referral Rock</a></i></span></p>
<hr style="margin: 10px 0;">
<p style="text-align: center;margin-top: 45px;margin-bottom: -50px;">
  <span style="font-size:100px">”</span>
</p>
<h2>No - Thank You, Josh!</h2>
<p>We love to see people enjoying Exceptionless - it's our baby, and we've put a lot of blood, sweat, and tears (I blame Blake) into it. Keep rocking it with Referral Rock!</p>
</article>
    
  

  
<article class="post type-post status-publish format-standard">
    <h2><a href="/website/news/2016/2016-02-01-track-view-user-session-data-exceptionless/">Track and View User Session Data - New Exceptionless Feature!</a></h2>
    <p><img src="/website/assets/img/news/sessions-dashboard-header2-1024x411.png" alt="app user session logging"></p>
<p>To many, this feature may be the missing piece... that connection you've always wanted to make between users, bugs, exceptions, app events, etc. I'm talking about, of course,&nbsp;<strong>user session tracking!</strong></p>
<p>That's right, you can now use Exceptionless to track users as they use your app, which of course will come in super handy when you want to know exactly what they did to stumble upon or cause an error or trigger an event.</p>
<p>Continue reading to learn more about sessions and how you can enable them for your apps.</p>
<!--more-->
<h2>Session Overview</h2>
<p>First, you must have a paid (premium) Exceptionless plan to report on sessions if you are hosting with us. This is mainly because of the added resource requirements the feature puts on our infrastructure. We think it's definitely worth it, though!</p>
<p>Sessions can be searched/filtered like all other events - they are just an event type like exceptions or logs.</p>
<h2>What's in a User Session Event?</h2>
<p>Each user session records how long they were active and what they did. For instance, the average user session on be.exceptionless.io the first week we monitored it using the feature was two hours.</p>
<p>With that, each user session event has a "Session Events" tab that displays all the relevant events that occurred during that session and allows you to see exactly what that user did. This is especially helpful, of course, if that session lead to an exception or noteworthy event in your app.</p>
<p style="text-align: center;">
  <a href="/website/assets/img/news/sessions-event-tab-user-footsteps.jpg" rel="attachment wp-att-14046">![App User Session Reporting](/assets/img/sessions-event-tab-user-footsteps-300x142.jpg)</a>
</p>
<p style="text-align: left;">
  All unique data that remains constant throughout the user session is also stored in the event, such as browser and environment information.
</p>
<p style="text-align: left;">
  <a href="/website/assets/img/news/sessions-unique-user-data.jpg" rel="attachment wp-att-14047">![app user session unique data](/assets/img/sessions-unique-user-data-300x155.jpg)</a>
</p>
<h2 style="text-align: left;">
  Sounds Good.&nbsp;How do I Set it Up?
</h2>
<p><img src="/website/assets/img/news/sessions-dashboard-nav.jpg" alt="sessions-dashboard-nav"> First, you'll need to update to the latest client versions to enable sessions, then you'll have to follow the below steps to begin tracking them. Once you've got that set up, visit the new&nbsp;Sessions section under the Reports option on your main dashboard, or navigate directly to&nbsp;https://be.exceptionless.io/session/dashboard. If you are&nbsp;<strong>self hosting</strong>, make sure you <a href="/website/new-releases-for-all-the-codes-exceptionless-3-2/" target="_blank">update to Exceptionless 3.2</a> first.</p>
<h3>Turning On Session Tracking</h3>
<p>For Exceptionless to track a user for your app, you need to send a user identity with each event. To do so, you need to set the default user identity via the following client methods:</p>
<h4>C#</h4>
<pre><code class="language-cs hljs language-csharp"><span class="hljs-keyword">using</span> Exceptionless;
ExceptionlessClient.Default.Configuration.SetUserIdentity(<span class="hljs-string">"UNIQUE_ID_OR_EMAIL_ADDRESS"</span>, <span class="hljs-string">"Display Name"</span>);
</code></pre>
<h4>JavaScript</h4>
<pre><code class="language-js hljs language-javascript">exceptionless.<span class="hljs-property">ExceptionlessClient</span>.<span class="hljs-property">default</span>.<span class="hljs-property">config</span>.<span class="hljs-title function_">setUserIdentity</span>(<span class="hljs-string">'UNIQUE_ID_OR_EMAIL_ADDRESS'</span>, <span class="hljs-string">'Display Name'</span>);
</code></pre>
<p>Once the user is set on the config object, it will be applied to all future events.</p>
<p><strong>Please Note:</strong> In WinForms and WPF applications, a plugin will automatically set the default user to the&nbsp;<code>**Environment.UserName**</code> if the default user hasn't been already set. Likewise, if you are in a web environment, we will set the default user to the request principal's identity if the default user hasn't already been set.</p>
<p>If you are using WinForms, WPF, or a Browser App, you can enable sessions by calling the&nbsp;<code>EnableSessions</code> extension method.</p>
<h4>C#</h4>
<pre><code class="language-cs hljs language-csharp"><span class="hljs-keyword">using</span> Exceptionless;
ExceptionlessClient.Default.Configuration.UseSessions();
</code></pre>
<h4>JavaScript</h4>
<pre><code class="language-js hljs language-javascript">exceptionless.<span class="hljs-property">ExceptionlessClient</span>.<span class="hljs-property">default</span>.<span class="hljs-property">config</span>.<span class="hljs-title function_">useSessions</span>();
</code></pre>
<h2>How do&nbsp;Sessions&nbsp;get Created?</h2>
<p>Sessions are created in two different ways. Either&nbsp;the client can send a session start event, or we can create it automatically on the server side when an event is processed.</p>
<p>We have a server-side plugin that runs as part of our pipeline process for every event - its sole purpose is to manage sessions by using a hash on the user's identity as a lookup for the session id.</p>
<p>If the session doesnt' exist or the current event is a session event type, a new session id will be created. If we receive a <code>sessionend</code> event, we close that session and update the end time on the <code>sessionstart</code> event.</p>
<p>We also have a <code>CloseInactiveSessionsJob</code> event that runs every few minutes to close sessions that haven't been updated in a set period of time. This allows you to efficiently show who is online and offline during a time window.</p>
<h2>How do I Enable Near Real-Time Online/Offline Then?</h2>
<p>We do this by default in our JavaScript, WinForms, and WPF clients when you call the <code>UseSessions()</code> method.</p>
<p>In the background, we send a <code>heartbeat</code> event every 30 seconds if no other events have been sent in the last 30 seconds.</p>
<p>You can <strong>disable this heartbeat</strong> from being sent by passing <code>false</code> as an argument to the <code>UseSessions()</code> method.</p>
<p>The WinForms and WPF clients will also send a <code>SessionEnd</code> event when the process exits.</p>
<h2>Can I Manually Send SessionStart, SessionEnd, and heartbeat Events?</h2>
<p>Sure! You can send these events manually via our client API to start, update, or end a session. Please remember, though, that a user identity must be set.</p>
<h3>C#</h3>
<pre><code class="language-cs hljs language-csharp"><span class="hljs-keyword">using</span> Exceptionless;
ExceptionlessClient.Default.SubmitSessionStart();
ExceptionlessClient.Default.SubmitSessionHeartbeat();
ExceptionlessClient.Default.SubmitSessionEnd();
</code></pre>
<h3>JavaScript</h3>
<pre><code class="language-js hljs language-javascript">exceptionless.<span class="hljs-property">ExceptionlessClient</span>.<span class="hljs-property">default</span>.<span class="hljs-title function_">submitSessionStart</span>();
exceptionless.<span class="hljs-property">ExceptionlessClient</span>.<span class="hljs-property">default</span>.<span class="hljs-title function_">submitSessionHeartbeat</span>();
exceptionless.<span class="hljs-property">ExceptionlessClient</span>.<span class="hljs-property">default</span>.<span class="hljs-title function_">submitSessionEnd</span>();
</code></pre>
<p><a href="https://github.com/exceptionless/Exceptionless.JavaScript/blob/v1.6.4/src/ExceptionlessClient.ts#L112-L128" target="_blank">Source</a></p>
<h2>Tell Us What You Think</h2>
<p>As always, please send us your feedback. You can post it here in the comments or <a href="https://github.com/exceptionless" target="_blank">submit a GitHub Issue</a> and we will get back to you as soon as possible! We're always looking for contributors, as well, so don't be afraid to jump in and be the hero the code needs. Contributors get Exceptionless perks!</p>
</article>
    
  

  
<article class="post type-post status-publish format-standard">
    <h2><a href="/website/news/2016/2016-01-27-new-releases-for-all-the-codes-exceptionless-3-2/">New Releases for ALL the Codes! Exceptionless 3.2</a></h2>
    <p><img src="/website/assets/img/news/exceptionless-3-2-release-notes.png" alt="Exceptionless 3.2 Highlights">That's right folks - we've gone and released Exceptionless 3.2, which includes releases for Exceptionless.NET, Exceptionless.JavaScript, and Exceptionless.UI! Awe yeah.</p>
<p>We're kind of excited, in case you couldn't tell. Big stuff in here, like&nbsp;<strong>session tracking</strong> (#BOOM), licensing changes (less confusion - it's a good thing), and <strong>posting via HTTP GET</strong> (such easy, much wow)!</p>
<p>Lets get into some of the details...<!--more--></p>
<h2>Exceptionless 3.2.0</h2>
<h3></h3>
<h3>Sessions!</h3>
<p><strong>Track and automatically manage user sessions</strong> for much more visibility into their user experience, how they interact with your app, and, of course, any errors or events that occur related to that user. This answers the age-old question, "What the hell was this guy doing when stuff blew up!?"</p>
<p><a href="/website/track-view-user-session-data-exceptionless/" target="_blank">Check out the User Sessions&nbsp;post for&nbsp;more details and instructions!</a></p>
<p><img src="/website/assets/img/news/sessions-2.png" alt="Exceptionless Event Sessions"></p>
<div style="clear: both;">
</div>
<h3>HTTP GET!</h3>
<p>Now it's even&nbsp;easier to <strong>integrate with Exceptionless from any environment</strong>, because you can post event or meta data via HTTP GET! More info coming soon (blog post).</p>
<h3>License Change</h3>
<p>The server and all Exceptionless projects are now using the <a href="https://github.com/exceptionless/Exceptionless/blob/master/LICENSE.txt" target="_blank">Apache License</a>, so&nbsp;there should be much less confusion on how things are licensed moving forward. Boring stuff, we know... but important.</p>
<h3>User Location</h3>
<p>User locations are&nbsp;now resolved from geographic coordinates or the IP address. We look at the <code>geo</code> property for coordinates or an IP, then we inspect the IP. If no IP or geo coordinates present themsevles, we fall back to the client IP that the event was submitted from.</p>
<h3>More Speed Improvements</h3>
<p>As always, we keep speed improvements in mind with each release. With 3.2, we've been able to make more <strong>massive improvements in processing time for events</strong> (over 250% per 1000 events!) and further reduce app startup times and elastic query execution times. #alwaysoptimizing!</p>
<h3>Hourly Throttling</h3>
<p>The hourly event-throttling threshold&nbsp;has been <strong>increased</strong> from 5x to 10x the plan limit. The way we calculate it is by taking the plan limit and dividing it by the hours in the month, then multiplying it by 10.</p>
<h3>Signup Experience</h3>
<p>The signup experience has been improved when inviting users, as well. Thanks <a href="https://github.com/mcquaiga" target="_blank">@mcquaiga</a> and <a href="https://github.com/theit8514" target="_blank">@theit8514</a> for your contribution!</p>
<h3>Upgrading (Self Hosters)</h3>
<p><strong>Self hoster?</strong> Need to upgrade? <a href="https://github.com/exceptionless/Exceptionless/releases/tag/v3.2.0" target="_blank">The latest code can be downloaded from the release page.</a>&nbsp;All other users: No action required.</p>
<hr>
<h2>Exceptionless.UI 2.3.0</h2>
<p>User experience was the primary focus of this UI release, along with the new sessions feature. More details below, including other improvements and a few bug fix details.</p>
<h3>Adding a New Project</h3>
<p>When adding a new project, users will now have a much better experience, and we&nbsp;added a JavaScript configuration section for JS projects. Check it out!</p>
<h3>Reference id Lookup</h3>
<p>Support for looking up reference ids was added, so you can now navigate to <code>/event/by-ref/YOUR_REFERENCE_ID</code> to look up an event.</p>
<h3>Other Improvements</h3>
<ul>
<li>Better messages and a loading mask has been added to data grids to improve user experience when filtering and loading data.</li>
<li>Escaping of strack traces containing HTML or CSS has also been improved.</li>
<li>You can now sort extended data items alphabetically.</li>
<li>The request and environment info tabs for events now show additional extended data.</li>
</ul>
<h3>Bug Fixes</h3>
<ul>
<li>You can now create an organization or project that ends with a period or whitespace.</li>
<li>Sometimes an incorrect time range would be set when users used the history chart/graph to select a period of time to drill down to.</li>
</ul>
<p>Check out the <a href="https://github.com/exceptionless/Exceptionless.UI/compare/v2.2.0...v2.3.0" target="_blank">Exceptionless.UI Changelog</a> for all the code changes (87 files / 75 commits).</p>
<hr>
<h2>Exceptionless.NET 3.3.2</h2>
<p>Users on desktop applications can now opt-in to sessions by setting a default user and calling the below:</p>
<pre><code class="language-cs hljs language-csharp">ExceptionlessClient.Default.Configuration.UseSessions();
</code></pre>
<p>Also, module info was not being included in some error reports, which was incorrect. That has now been fixed.</p>
<p>The <a href="https://github.com/exceptionless/Exceptionless.Net/compare/v3.3.1...v3.3.2" target="_blank">full change log</a> can be viewed on GitHub.</p>
<hr>
<h2>Exceptionless.JavaScript 1.3.1</h2>
<p>Besides integrating with the above, the only major change in the JavaScript client, like the .NET client, was that users can now op-in to sessions. To do so, set a default user and call the below:</p>
<pre><code class="language-cs hljs language-csharp">exceptionless.ExceptionlessClient.<span class="hljs-literal">default</span>.config.useSessions();
</code></pre>
<p>Check out the <a href="https://github.com/exceptionless/Exceptionless.JavaScript/compare/v1.3.0...v1.3.1" target="_blank">full change log</a> for all the dirty details.</p>
</article>
    
  

  
<article class="post type-post status-publish format-standard">
    <h2><a href="/website/news/2015/2015-12-28-exceptionless-case-study-featured-on-elasticsearch/">Elasticsearch Case Study - By Exceptionless</a></h2>
    <p><img src="/website/assets/img/news/elasticsearch-logo.png" alt="Elasticsearch case study"></p>
<p>We recently wrote a case study regarding how Elasticsearch has helped us improve speed and ease of scale as we've continued to improve&nbsp;Exceptionless.</p>
<p><strong>Last week, Elasticsearch <a href="https://www.elastic.co/blog/being-exceptionless-with-elasticsearch" target="_blank">published that case study on their blog</a></strong>, so we wanted to make sure our readers had a chance to check it out!</p>
<p>We've written about our use of Elasticsearch in numerous articles before, including:<!--more--></p>
<ul>
<li><a href="/website/news/2014/2014-09-03-making-move-elastic-search-exceptionless-2-0">Making the Move to Elasticsearch for Exceptionless 2.0</a></li>
<li><a href="/website/news/2014/2014-12-07-filter-your-exceptions-video-demo">Filter Your Exceptions in Version 2.0 - Video Demo</a></li>
<li><a href="/website/news/2015/2015-07-23-exceptionless-3-0-changes-to-build-process-dependencies-self-hosting">Exceptionless V3.0 - Changes to the Build Process, Dependencies, and Self Hosting</a></li>
<li><a href="/website/news/2015/2015-10-28-exceptionless-3-1-released-if-you-thought-it-was-fast-before">Exceptionless 3.1 Released! If You Thought It was Fast Before...</a></li>
</ul>
<p><strong>In the case study</strong>, we discuss how Elasticsearch let us improve our real-time dashboard, work with time zones more easily, index data much faster, not have to worry so much about pre-aggregating data, maintain much less code, improve backup and restoration, shrink disk space usage, and, perhaps most importantly, drastically improve scalability.</p>
<p>Basically, <strong>we really like Elasticsearch</strong> and you should check it out if you haven't already.</p>
<h2>Do you use Elasticsearch?</h2>
<p>Let us know how it's helped you, or if you have any questions we might be able to answer, by commenting below!</p>
</article>
    
    
    
    
    
    
    
    
    
    
    
    <a href="/website/tags/case-study/" class="tag">Case Study</a>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
  

  
<article class="post type-post status-publish format-standard">
    <h2><a href="/website/news/2015/2015-12-17-using-reference-ids-for-better-customer-service/">Using Reference Ids for Better Customer Service</a></h2>
    <p><img src="/website/assets/img/news/reference-ids-blog-header-image.png" alt="Exceptionless Reference IDs"></p>
<p>This week we want to talk about <strong>reference Ids</strong> and how we use them to <strong>improve customer service</strong> for Exceptionless. And how we think you can do the same for your users.</p>
<h2>What's a Reference Id?</h2>
<p>A reference id is a unique identifier, generated by the user, that allows you to look up a submitted event at a later time. This is important because <em>event Ids are not created until after the event is processed</em>, so there is no other way to look up an event. We also use Reference Ids to help deduplicate events server side, which is another reason why it’s important that they are unique.</p>
<h2>Using&nbsp;Reference Ids for the Greater Good</h2>
<!--more-->
<p>One of the ways we use Reference Ids is to <strong>support end users</strong>, something that is very important to us. There is nothing more frustrating than being unable to help a user that is experiencing a problem because you don’t know what they are seeing (when there could be thousands of errors in your app).</p>
<p>To combat this issue, we always try to include a reference Id with every error message shown to the user. This allows end users to contact us with a Reference Id and receive help <strong>immediately</strong> for the error they are seeing because we can <strong>easily track down and view it</strong>.</p>
<h2>Reference Id Example</h2>
<p>The Exceptionless clients have built in support to generate and track unique Reference Ids for every error event. Behind the scenes, we register a default Reference Id plugin that sets a Reference Id on submitted error events and stores the Reference Id in an implementation of <a>ILastReferenceIdManager</a>. The Reference Id manager’s goal is just to persist and retrieve the last used Reference Id.</p>
<p>Since this is a default plugin, we can enable this behavior by calling the <code>UseReferenceIds()</code> method on the configuration object to register the default Reference Id on every error event.</p>
<h3>C# Example</h3>
<pre><code class="language-cs hljs language-csharp"><span class="hljs-keyword">using</span> Exceptionless;
ExceptionlessClient.Default.Configuration.UseReferenceIds();
</code></pre>
<h3>JavaScript Example</h3>
<pre><code class="language-js hljs language-javascript">exceptionless.<span class="hljs-property">ExceptionlessClient</span>.<span class="hljs-property">default</span>.<span class="hljs-property">config</span>.<span class="hljs-title function_">useReferenceIds</span>();
</code></pre>
<p>Please note that you can <strong>create your own plugin</strong> to create your very own Reference Id(s).</p>
<p>To <strong>get the the last used Reference Id</strong>, you can call the <code>GetLastReferenceId()</code> helper method on the the <code>ExceptionlessClient</code> instance.</p>
<h4>C#</h4>
<pre><code class="language-cs hljs language-csharp"><span class="hljs-keyword">using</span> Exceptionless;
<span class="hljs-comment">// Get the last created Reference Id</span>
ExceptionlessClient.Default.GetLastReferenceId();
</code></pre>
<h4>JavaScript</h4>
<pre><code class="language-js hljs language-javascript"><span class="hljs-comment">// Get the last created Reference Id</span>
exceptionless.<span class="hljs-property">ExceptionlessClient</span>.<span class="hljs-property">default</span>.<span class="hljs-title function_">getLastReferenceId</span>();
</code></pre>
<p>You might have noticed how easy it is to get or add Reference Id’s to your events automatically. This makes it a breeze to let your developers track down user-facing issues by displaying the Reference Id to your end users.</p>
<p>We <strong>display Reference Ids</strong> to all of our end users anytime an error occurs in our ASP.NET WebAPI application. We accomplish this by adding a custom <code>&lt;a href="http://www.asp.net/web-api/overview/error-handling/web-api-global-error-handling" target="_blank"&gt;IExceptionHandler&lt;/a&gt;</code> and return a new error response to include the Reference Id as shown below:</p>
<pre><code class="language-cs hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ExceptionlessReferenceIdExceptionHandler</span> : <span class="hljs-title">IExceptionHandler</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> Task <span class="hljs-title">HandleAsync</span>(<span class="hljs-params">ExceptionHandlerContext context, CancellationToken cancellationToken</span>)</span> {
        <span class="hljs-keyword">if</span> (context == <span class="hljs-literal">null</span>)
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentNullException(<span class="hljs-keyword">nameof</span>(context));

        <span class="hljs-keyword">var</span> exceptionContext = context.ExceptionContext;
        <span class="hljs-keyword">var</span> request = exceptionContext.Request;
        <span class="hljs-keyword">if</span> (request == <span class="hljs-literal">null</span>)
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentException(<span class="hljs-string">$"<span class="hljs-subst">{<span class="hljs-keyword">typeof</span>(ExceptionContext).Name}</span>.<span class="hljs-subst">{<span class="hljs-string">"Request"</span>}</span> must not be null"</span>, <span class="hljs-keyword">nameof</span>(context));

        context.Result = <span class="hljs-keyword">new</span> ResponseMessageResult(CreateErrorResponse(request, exceptionContext.Exception, HttpStatusCode.InternalServerError));
        <span class="hljs-keyword">return</span> TaskHelper.Completed();
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> HttpResponseMessage <span class="hljs-title">CreateErrorResponse</span>(<span class="hljs-params">HttpRequestMessage request, Exception ex, HttpStatusCode statusCode</span>)</span> {
        HttpConfiguration configuration = request.GetConfiguration();
        HttpError error = <span class="hljs-keyword">new</span> HttpError(ex, request.ShouldIncludeErrorDetail());

        <span class="hljs-built_in">string</span> lastId = ExceptionlessClient.Default.GetLastReferenceId();
        <span class="hljs-keyword">if</span> (!String.IsNullOrEmpty(lastId))
            error.Add(<span class="hljs-string">"Reference"</span>, lastId);

        <span class="hljs-comment">// CreateErrorResponse should never fail, even if there is no configuration associated with the request</span>
        <span class="hljs-comment">// In that case, use the default HttpConfiguration to con-neg the response media type</span>
        <span class="hljs-keyword">if</span> (configuration == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">using</span> (HttpConfiguration defaultConfig = <span class="hljs-keyword">new</span> HttpConfiguration()) {
                <span class="hljs-keyword">return</span> request.CreateResponse(statusCode, error, defaultConfig);
            }
        }

        <span class="hljs-keyword">return</span> request.CreateResponse(statusCode, error, configuration);
    }
}
</code></pre>
<p>The next step is to replace the existing <code>IExceptionFilter</code> with the one above.</p>
<pre><code class="language-cs hljs language-csharp">Config.Services.Replace(<span class="hljs-keyword">typeof</span>(IExceptionHandler), <span class="hljs-keyword">new</span> ExceptionlessReferenceIdExceptionHandler());
</code></pre>
<p>Finally, when an error occurs in your app, you’ll get a more user friendly error response that contains a Reference Id!</p>
<pre><code class="language-cs hljs language-csharp">{
    <span class="hljs-string">"message"</span>: <span class="hljs-string">"An error has occurred."</span>,
    <span class="hljs-string">"reference"</span>: <span class="hljs-string">"411085622e"</span>
}
</code></pre>
<p>We’ve found that this allows consumers of our API to quickly contact us with a reference id and get up and running quickly!</p>
<h2>Looking up Events by Reference Id</h2>
<p>You might be thinking: "Reference Ids are great, but what do I do with them now that I have one." Well, you can view the event that they reference on our site or via our API. This can be accomplished two different ways:</p>
<ul>
<li><strong>Hotlinking</strong>: You can link directly to a submitted event by outputting a link in your UI or logs (e.g. https://be.exceptionless.io/event/by-ref/YOUR_REFERENCE_ID)</li>
<li><strong>Search</strong>: You can search via our api/ui with <code>reference:YOUR_REFERENCE_ID</code></li>
</ul>
<h2>Your Turn!</h2>
<p>We hope this article was helpful, and we'd love to know if you're using Reference Ids&nbsp;and how they've helped you help users, solve internal issues, etc. Post a comment below!</p>
</article>
    
  

  
<article class="post type-post status-publish format-standard">
    <h2><a href="/website/news/2015/2015-12-08-better-approach-running-azure-webjobs/">A Better Approach to Running Azure WebJobs</a></h2>
    <p><img src="/website/assets/img/news/jobs-blog-header-image.jpg" alt="Azure Webjobs"></p>
<p>Lets talk about jobs in the Exceptionless world for a minute and <strong>how you can use our methods to improve your Azure WebJobs.</strong></p>
<p>A job is a specific task/process that runs and does something like send a mail message, etc.</p>
<h2>Out with the Old</h2>
<p><strong>Prior to version 3.1</strong>, we used&nbsp;an early version of the Foundatio Jobs system to run our out-of-process jobs via Azure WebJobs. We found it to be quite a pain to figure out which jobs were running or eating up system resources because every job was titled Job.exe (just like figuring out the&nbsp;w3wp IIS process is running).&nbsp;Also, just&nbsp;to run an out-of-process job,&nbsp;one would have to compile the source, copy dependencies to a common bin folder, and then run&nbsp;an executable (Job.exe) with parameters that specify the job type.</p>
<p>These tedious and error-prone tasks that had to be completed just to get a job to run&nbsp;are a thing of the past.</p>
<h2>In with the New</h2>
<!--more-->
<p><strong>In Exceptionless 3.1</strong> we focused on refining and improving jobs. To do so, we created a <a href="https://github.com/exceptionless/Exceptionless/blob/master/src/Exceptionless.Core/Jobs" target="_blank" rel="noopener">new console application for each job</a> and specified settings in the code versus <a href="https://github.com/exceptionless/Exceptionless/blob/master/src/Exceptionless.Core/Jobs/EventPostsJob.cs#L16-L22" target="_blank" rel="noopener">error prone command line options as shown here</a>.</p>
<p>Now, with <a href="/website/introducing-foundatio-3-0-async-efficiency/">Foundatio</a>, our open source app building block solution used in Exceptionless, you just define a&nbsp;new <a href="https://github.com/FoundatioFx/Foundatio#jobs">Job</a> that runs (via the run method) and you can use the <a href="https://github.com/FoundatioFx/Foundatio#jobs">Foundatio Jobs API</a>&nbsp;to run the job in process, out of process, continuous, or one time without changing the implementation.</p>
<p>This new approach also gave us a great deployment strategy, for free. Simply copy the job executable and bin folders and run it anywhere!</p>
<h3>Jobs (processes) running in Azure as an Azure web job</h3>
<p><img src="/website/assets/img/news/Jobs-1024x670.jpg" alt="Exceptionless Jobs and Processes"></p>
<h3>How you can implement&nbsp;a better&nbsp;Azure WebJob</h3>
<p><a href="https://github.com/FoundatioFx/Foundatio#jobs">Foundatio Jobs</a> allows you to run a long running process (in process or out of process) with out worrying about it being terminated prematurely. By using Foundatio Jobs you gain all of the following features <strong>without changing your job implementation</strong>:</p>
<ul>
<li>Run job&nbsp;in process</li>
<li>Run job out of process</li>
<li>Run job&nbsp;with a start up delay</li>
<li>Run job in an&nbsp;continuous loop with an optional interval delay.</li>
</ul>
<p>In this sample we'll just define a new class called HelloWorldJob that will hold our job that increments a counter and derives from JobBase. Please note that there are a few different base classes you can derive from based on your use case.</p>
<pre><code class="language-cs hljs language-csharp"><span class="hljs-keyword">using</span> Foundatio.Jobs;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">HelloWorldJob</span> : <span class="hljs-title">JobBase</span> {
   <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> RunCount { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

   <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> Task&lt;JobResult&gt; <span class="hljs-title">RunInternalAsync</span>(<span class="hljs-params">JobRunContext context</span>)</span> {
       RunCount++;
       <span class="hljs-keyword">return</span> Task.FromResult(JobResult.Success);
   }
}
</code></pre>
<p>Now that we have our job defined we can run our job in process with a few different options:</p>
<pre><code class="language-cs hljs language-csharp"><span class="hljs-keyword">var</span> job = <span class="hljs-keyword">new</span> HelloWorldJob();
<span class="hljs-keyword">await</span> job.RunAsync(); <span class="hljs-comment">// job.RunCount = 1;</span>
<span class="hljs-keyword">await</span> job.RunContinuousAsync(iterationLimit: <span class="hljs-number">2</span>); <span class="hljs-comment">// job.RunCount = 3;</span>
<span class="hljs-keyword">await</span> job.RunContinuousAsync(cancellationToken: <span class="hljs-keyword">new</span> CancellationTokenSource(TimeSpan.FromMilliseconds(<span class="hljs-number">10</span>)).Token); <span class="hljs-comment">// job.RunCount &gt; 10;</span>
</code></pre>
<p>But our goal is to run this out of process in an Azure WebJob (this also works if you want to run this as a service or from the desktop).</p>
<p>The&nbsp;first step is to create a new console application and reference the <a style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px;" href="https://www.nuget.org/packages/Foundatio/">Foundatio NuGet Package</a>&nbsp;and the project that contains our HelloWorldJob.&nbsp;We are going to call our console application HelloWorldJob. Inside of the Program class, we'll update the main method to run our job.</p>
<pre><code class="language-cs hljs language-csharp"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.IO;
<span class="hljs-keyword">using</span> JobSample;
<span class="hljs-keyword">using</span> Foundatio.Jobs;
<span class="hljs-keyword">using</span> Foundatio.ServiceProviders;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">HelloWorldJob</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span> {
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span> {
            <span class="hljs-comment">// <span class="hljs-doctag">NOTE:</span> This should be the path to your App_Data folder of your website.</span>
            <span class="hljs-keyword">var</span> path = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, <span class="hljs-string">@"..\..\..\Api\App_Data"</span>);
            <span class="hljs-keyword">if</span> (Directory.Exists(path))
                AppDomain.CurrentDomain.SetData(<span class="hljs-string">"DataDirectory"</span>, path);

            <span class="hljs-comment">// Get a service provider so we can create an instance of our job.</span>
            <span class="hljs-keyword">var</span> serviceProvider = ServiceProvider.GetServiceProvider(<span class="hljs-string">"JobSample.JobBootstrappedServiceProvider,JobSample"</span>);

            <span class="hljs-keyword">var</span> job = serviceProvider.GetService&lt;JobSample.HelloWorldJob&gt;();
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> JobRunner(job, initialDelay: TimeSpan.FromSeconds(<span class="hljs-number">2</span>), interval: TimeSpan.Zero).RunInConsole();
        }
    }
}
</code></pre>
<p>The last steps are to simply compile the project and deploy it to your Azure website!</p>
<h3>Questions?</h3>
<p>If you have any questions please feel free to contact us via our contact page, in app message, <a href="https://github.com/FoundatioFx/Foundatio/issues">GitHub issues</a> or <a href="https://discord.gg/6HxgFCx">Discord</a>.</p>
</article>
    
  

  
<article class="post type-post status-publish format-standard">
    <h2><a href="/website/news/2015/2015-12-03-exceptionles-javascript-1-2-release-notes/">Exceptionless.JavaScript 1.2 Release Notes</a></h2>
    <p><img src="/website/assets/img/news/blog-header-image-post2b-300x106.png" alt="Exceptionless JavaScript Client">We've got a quick release for the Exceptionless JavaScript Client that includes a few new additions to what it supports and a quick bug fix or two.</p>
<p>Shout out to <a href="https://github.com/frankebersoll" target="_blank">@frankebersoll</a>&nbsp;for his help!</p>
<p><strong>Please download and update to&nbsp;the</strong> <a href="https://github.com/exceptionless/Exceptionless.JavaScript/releases/tag/v1.2.0" target="_blank">source code here</a>, and view the full <a href="https://github.com/exceptionless/Exceptionless.JavaScript/compare/v1.1.1...v1.2.0" target="_blank">change log here</a>.<!--more--></p>
<h2>JavaScript Client v1.2 Notes</h2>
<h3>Errors</h3>
<p>@frankebersoll added support for deduplicating JavaScript errors. Thanks!</p>
<h3>Data Collection</h3>
<p>Frank's back at it, adding support for collecting extra exception data that was already in the .NET client like module info, custom exception properties, and everything else that was already displayed in the UI when using the .NET client.</p>
<h3>Node Info</h3>
<p>Support for collecting Node module info has also been added (thanks again, @frankebersoll).</p>
<h3>Bug Fix - Invalid States</h3>
<p>An issue where Data Exclusions could cause events to be submitted in an invalid state has been fixed.</p>
<h3>As always, let us know if you have any questions or feedback!</h3>
</article>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <a href="/website/tags/javascript/" class="tag">javascript</a>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
  



<hr>

<nav class="post-navigation">
  <ul>
    <li>
      <a href="/website/news/6/" rel="prev">← Previous</a>
    </li>
    

    <li>
      Page 7
    </li>
    <li>
      <a href="/website/news/8/" rel="next">Next →</a>
    </li>
    
  </ul>
</nav>

  </div>
</div>
    

    <div id="footer-wrapper">
        <footer id="content-info" class="container" role="contentinfo">
            <div class="row-fluid">
                <div class="span4"><section id="text-2" class="widget-1 widget-first widget widget_text"><div class="widget-inner">			<div class="textwidget"><h3><span class="slash">//</span> Quick Links</h3>
                    <ul class="footer-links clearfix">
                        <li><a href="/website/">Home</a></li>
                        <li><a href="/website/tour/">Tour</a></li>
                        <li><a href="/website/why/">Why?</a></li>
                        <li><a href="/website/pricing/">Pricing</a></li>
                        <li><a href="/website/news/">News</a></li>
                        <li><a href="/website/docs/">Docs</a></li>
                    </ul>
                    <ul class="footer-links clearfix">
                        <li><a href="javascript:Intercom('showNewMessage');">Contact</a></li>
                        <li><a href="https://github.com/exceptionless/Exceptionless" target="_blank" rel="noopener noreferrer">GitHub</a></li>
                        <li><a href="/website/about/">About Us</a></li>
                        <li><a href="/website/terms/">Terms of Use</a></li>
                        <li><a href="/website/privacy/">Privacy Policy</a></li>
                        <li>&nbsp;</li>
                    </ul></div>
                </div></section></div>
                <div class="span3"></div>
                <div class="span4"><section id="text-3" class="widget-1 widget-first widget widget_text"><div class="widget-inner">			<div class="textwidget"><h3><span class="slash">//</span> Stay In Touch</h3>
                    <p>There are real people behind Exceptionless, so if you have a question or suggestion (no matter how small) please get in touch with us:</p>

                    <ul class="social-icons-container">
                        <li>
                            <a href="https://twitter.com/exceptionless" target="_blank" class="social-icon social-icon-twitter" rel="noopener noreferrer">Twitter</a>
                        </li>
                        <li>
                            <a href="https://www.facebook.com/exceptionless" target="_blank" class="social-icon social-icon-facebook" rel="noopener noreferrer">Facebook</a>
                        </li>
                        <li>
                            <a href="https://github.com/exceptionless/Exceptionless" target="_blank" class="social-icon social-icon-github" rel="noopener noreferrer">GitHub</a>
                        </li>
                    </ul></div>
                </div></section></div>
            </div>
        </footer>
        <div class="copyrightContainer">
            <p class="copyright">© 2020 Exceptionless</p>
        </div>
    </div>

    <script src="/website/assets/js/main.js"></script>
    
    <!-- intercom -->
<script>
window.intercomSettings = {
    app_id: "6c0d76e0bec950052459f5cb4b727a949aeabbe1"
};
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/6c0d76e0bec950052459f5cb4b727a949aeabbe1';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>
<!-- end intercom -->

  

</body></html>